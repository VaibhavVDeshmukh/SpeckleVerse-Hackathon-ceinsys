<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <link rel="icon" type="image/svg+xml" href="favicon.svg" />
    <link
      rel="stylesheet"
      type="text/css"
      href="/public/potree/build/potree/potree.css"
    />
    <link
      rel="stylesheet"
      type="text/css"
      href="/public/potree/libs/jquery-ui/jquery-ui.min.css"
    />
    <link
      rel="stylesheet"
      type="text/css"
      href="/public/potree/libs/openlayers3/ol.css"
    />
    <link
      rel="stylesheet"
      type="text/css"
      href="/public/potree/libs/spectrum/spectrum.css"
    />
    <link
      rel="stylesheet"
      type="text/css"
      href="/public/potree/libs/jstree/themes/mixed/style.css"
    />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Vite App</title>
    <script src="https://cdn.tailwindcss.com"></script>
  </head>
  <body class="">
    <div class="w-screen h-screen flex flex-row">
      <div class="h-auto w-1/2 flex-1">
        <div
          id="potree_render_area"
          class="flex-1 relative max-w-1/2 overflow-hidden"
        ></div>
      </div>
      <div class="h-auto w-1/2 flex-1">
        <div id="renderer" class="flex-1 relative"></div>
        <div
          id="renderer-controls"
          class="relative overflow-hidden h-full pointer-events-none w-auto"
        ></div>
      </div>
    </div>
    <script type="module" src="/src/main.ts"></script>
    <script type="module" src="/src/pcViewer.ts"></script>
    <script src="/public/potree/libs/jquery/jquery-3.1.1.min.js"></script>

    <script src="/public/potree/libs/spectrum/spectrum.js"></script>
    <script src="/public/potree/libs/jquery-ui/jquery-ui.min.js"></script>
    <script src="/public/potree/libs/other/BinaryHeap.js"></script>
    <script src="/public/potree/libs/tween/tween.min.js"></script>
    <script src="/public/potree/libs/d3/d3.js"></script>
    <script src="/public/potree/libs/proj4/proj4.js"></script>
    <script src="/public/potree/libs/openlayers3/ol.js"></script>
    <script src="/public/potree/libs/i18next/i18next.js"></script>
    <script src="/public/potree/libs/jstree/jstree.js"></script>
    <script src="/public/potree/build/potree/potree.js"></script>
    <script src="/public/potree/libs/plasio/js/laslaz.js"></script>
    <script src="/public/potree/libs/shapefile/shapefile.js"></script>
    <!-- <script type="module">
      import * as THREE from 'three'

      window.viewer = new Potree.Viewer(document.getElementById('potree_render_area'))

      viewer.setEDLEnabled(true)
      viewer.setFOV(60)
      viewer.setPointBudget(2_000_000)
      viewer.loadSettingsFromURL()
      viewer.loadGUI(() => {
        viewer.setLanguage('en')
        $('#menu_appearance').next().show()
        viewer.toggleSidebar()
      })

      // Load and add point cloud to scene
      Potree.loadPointCloud(
        'http://5.9.65.151/mschuetz/potree/resources/pointclouds/helimap/360/MLS_drive1/cloud.js',
        'MLS',
        (e) => {
          let scene = viewer.scene
          let pointcloud = e.pointcloud

          let material = pointcloud.material
          material.size = 0.5
          material.minSize = 2.0
          material.pointSizeType = Potree.PointSizeType.ADAPTIVE
          material.shape = Potree.PointShape.SQUARE
          material.activeAttributeName = 'rgba'

          scene.addPointCloud(pointcloud)

          viewer.scene.view.setView(
            [2652381.103, 1249049.447, 411.636],
            [2652364.407, 1249077.205, 399.696]
          )

          run()
        }
      )

      async function run() {
        proj4.defs('WGS84', '+proj=longlat +ellps=WGS84 +datum=WGS84 +no_defs')
        proj4.defs('pointcloud', viewer.getProjection())
        let transform = proj4('WGS84', 'pointcloud')

        let params = {
          transform: transform
        }

        // this file contains coordinates, orientation and filenames of the images:
        // http://5.9.65.151/mschuetz/potree/resources/pointclouds/helimap/360/Drive2_selection/coordinates.txt
        // Potree.Images360Loader.load(
        //   'http://5.9.65.151/mschuetz/potree/resources/pointclouds/helimap/360/Drive2_selection',
        //   viewer,
        //   params
        // ).then((images) => {
        //   viewer.scene.add360Images(images)
        // })

        // viewer.mapView.showSources(false)
      }
    </script> -->
    <!-- <div class="w-screen h-screen flex flex-col" id="multi-root">
      <div class="h-1/2">
        <div class="absolute w-full h-1/2" id="renderer0"></div>
        <div
          id="renderer0-controls"
          class="relative overflow-y-scroll h-full pointer-events-none w-auto"
        ></div>
      </div>
      <div class="border-t-2 border-blue-500 h-1/2">
        <div class="absolute w-full h-1/2" id="renderer1"></div>
        <div
          id="renderer1-controls"
          class="relative overflow-y-scroll h-full pointer-events-none w-auto"
        ></div>
      </div>
    </div>
    <script type="module" src="/src/main-multi.ts"></script> -->
  </body>
</html>
